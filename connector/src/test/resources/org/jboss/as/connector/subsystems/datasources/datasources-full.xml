<subsystem xmlns="urn:jboss:domain:datasources:4.0">
    <datasource jndi-name="java:jboss/datasources/complexDs" name="complexDs_Pool" jta="false"
                use-java-context="true" spy="false" use-ccm="true" statistics-enabled="true" tracking="true"
                connection-url="jdbc:h2:mem:test;DB_CLOSE_DELAY=-1"
                driver-class="org.hsqldb.jdbcDriver"
                datasource-class="org.jboss.as.connector.subsystems.datasources.ModifiableDataSource"
                transaction-isolation="TRANSACTION_READ_COMMITTED"
                new-connection-sql="select 1"
                url-delimiter=":"
                url-selector-strategy-class-name="someClass"

            >
        <connection-property name="char.encoding">
            UTF-8
        </connection-property>


        <pool min-pool-size="1" max-pool-size="5" prefill="true" use-strict-min="true" flush-strategy="EntirePool"
              allow-multiple-users="true"/>
        <security user-name="sa" password="sa" reauth-plugin-class-name="someClass1">
            <reauth-plugin-config-properties name="name" value="Property1"/>
        </security>

        <validation valid-connection-checker-class-name="someClass2"
                    check-valid-connection-sql="select 1"
                    validate-on-match="true"
                    background-validation="true"
                    background-validation-millis="2000"
                    use-fast-fail="true"
                    stale-connection-checker-class-name="someClass3"
                    exception-sorter-class-name="someClass4">
            <valid-connection-checker-config-properties name="name" value="Property2"/>
            <stale-connection-checker-config-properties name="name" value="Property3"/>
            <exception-sorter-config-properties name="name" value="Property4"/>

        </validation>
        <timeout
                blocking-timeout-millis="2000"
                idle-timeout-minutes="4"
                query-timeout="120"
                use-try-lock="100"
                allocation-retry="3"
                allocation-retry-wait-millis="3000"
                />

        <statement
                prepared-statement-cache-size="30"
                track-statements="nowarn"
                />
    </datasource>
    <xa-datasource jndi-name="java:jboss/xa-datasources/complexXaDs" name="complexXaDs_Pool" use-java-context="true"
                   spy="false" use-ccm="true"
                   xa-datasource-class="org.jboss.as.connector.subsystems.datasources.ModifiableXaDataSource"
                   driver="h2"
                   transaction-isolation="TRANSACTION_READ_COMMITTED"
                   new-connection-sql="select 1"
                   url-delimiter=":"
                   url-selector-strategy-class-name="someClass"
                   no-recovery="false"
            >
        <xa-datasource-property name="URL" value="jdbc:h2:mem:test" />
        <recover-plugin-config-properties name="name" value="Property5" />
        <recover-plugin-config-properties name="name1" value="Property6"/>


        <pool min-pool-size="1" max-pool-size="5" prefill="true" use-strict-min="true"
              flush-strategy="EntirePool" allow-multiple-users="true"
              is-same-rm-override="true" no-tx-separate-pools="true"
              pad-xid="true" wrap-xa-resource="true" interleaving="true"/>


        <security user-name="sa" password="sa" reauth-plugin-class-name="someClass1">
            <reauth-plugin-config-properties name="name" value="Property1"/>
        </security>

        <validation valid-connection-checker-class-name="someClass2"
                    check-valid-connection-sql="select 1"
                    validate-on-match="true"
                    background-validation="true"
                    background-validation-millis="2000"
                    use-fast-fail="true"
                    stale-connection-checker-class-name="someClass3"
                    exception-sorter-class-name="someClass4">
            <valid-connection-checker-config-properties name="name" value="Property2"/>
            <stale-connection-checker-config-properties name="name" value="Property3"/>
            <exception-sorter-config-properties name="name" value="Property4"/>

        </validation>
        <timeout
                blocking-timeout-millis="2000"
                idle-timeout-minutes="4"
                query-timeout="120"
                use-try-lock="100"
                allocation-retry="3"
                allocation-retry-wait-millis="3000"
                />

        <statement
                prepared-statement-cache-size="30"
                track-statements="nowarn"
                />
        <recover-credential user-name="sa" password="sa" />

    </xa-datasource>
    <drivers>
        <driver name="h2" module="com.h2database.h2" xa-datasource-class="org.h2.jdbcx.JdbcDataSource"/>
    </drivers>

</subsystem>
